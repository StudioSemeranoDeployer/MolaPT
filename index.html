<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gianluca Mola Personal Trainer</title>
    <script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=X5AtIfdt_ai4spJQOOofERGgcutQ1t5bVQU_JWt9XXAxMbfkYpUJdz3XjlTQcnrZpXrR0Vw6keCf371DEXDR_HVkZ2cvzJchaBlwyzE7OTyBlrp2uctSbA3zjVIq92fxe5wuwqPFQIdSKnovLvbF5BgjKYLAPrFoWSPms992vvaIWiZsbTQMi7tslK4X9iPRIHej83lqvkjNm3bWoYKeFcF7AiwClKoXR6ip1aMcBprtEDhoWlKupdggivX21XZoamNG2jvJoV7v-EId5JFFI7yCEh76eZnF_pAMtNP056VhSnzgduigsVyhEDLl3Mr0-eiFcVdOFsP4dkaPF84g6JLwV7noXK668aEDZMPAOsLpFFejDwrGwSRgYQoWYv5ZuKgw4EAL1DTCJSQ32Te5ZFOAZYtIom2tXuu29rQnWusUgHCuC6BDbOyCtTH0nKViDcL2dxNY40AWS-e7ZZIyr07uxpm_w1UD0A0KIUN7j78RdzeMsRsXbwxpIrKPcGMUHMqBlLnM-da5ghVxRn1XYy85rWAqOPJCfpvxoHauajuXyPy3FTeSxSZlUf63LionNQ6BtxrVtW7Uud4q7AdalSq7_pu5UzqM4pRO8Clw_eZ8ywJgc9S7htpN2CMh3QkEW1NNtCO3gy4KdGMdFdTYjvDHJ-S7QxWSniurTrLnOfeROU2ByTKU9E5O2uWpetn4XYzGrGBEWTSjS5NHx_QXZXaR1IPzVhFMbV7eeXS6cYNFT-GMW-4fjIX2Gin7fLNklMjyhLnfPokhHxs85L_gg8a_3xYVi4DsWG2MUDlMgyVATLCMT-VIpyzz-xB5slpAzsJS50thNcOTs1TAq2PMBlbbDSCm_4Q9zqFdJ2VSjNGH8Rc2NRSGrZF92w8FZIywLNkMwbQWjiDbV-YydwKBEBtRGynfhOrfxcInYXQtjXe55x5M4tAXbfbUD7A3lMNZksQFzU4F95XHK_KNU2p_VjnEc7D_kbARNPnQFe2Q7M5vZbiuhDPW3ritHSZ02CUmgEXlGw0hLDlCjunazJe5K0imYpqFUsS0VrOoYOd8BpCONcWbtogC0nIZYYFqkMPFbBUankHJxRyH0DVRCNBYb6xXISRw-n-PbtLS1GeG389j5bSwA3htRSbgE6t6lJmW3U9tMmHnnjEjytMG3ekewY9AYYv76PLCkDmEfSR19ykUPz7YkZi-vmF4T7XwXDwaPAJ--ylQ1_QNJgLGTh-o3Dx31uPlDa6RAcqRtCc0rH4L0ikojvGnTwTm6XL1Ee3cENiC7KPD18Bj7-N5TpfF4DhEQ1VwaeIjTn91dOonMUEmTo9W_GmFievFaCrMzMMR_Ac-rlV_e8Nut4Y6eH1YsWt8QKwRnZDEPinlvnHK_SW34ITLnVH24uiNEDQsltaOinZm3-oYxTd1M1v3-_ntNN-hK3Zm_eMi762hD0SbR0fxKg0N_fNHBYuM7gb4ClN7LJ2azGLcCo0FXlb8giPKiNDKIu7Hu6PrkkKj10sYq1BVFXKRqdcqG602zkhngfEYYs20aF3TK-t7rcqgLzDqGKobE0y62q34Z9zJrD22WEmgbOhc_J2X_J1XK0nkdmdPOgMUlTc_xQfU3HiO4Gh6bJSENpj7IrJQUDbtiDXQrY5QIPDRkL5o3jAq-uXa6nDOm_wLAnrSp7f1Z9-nLz7TjIQPbOIudOmxJrxSOJru_QXG-AMvuhKcmURRa3pHy2rCCGtJk5AhKiskCbGGzcuiADIx45hLZU2i9Rykc4Ec9h3yIpE0Zc_6uu9KCgDdkCNKWEHmS-Kq6nLa6OacDC-SFNWkgNaIl-cgaYNmkKM2__rPhRA-kXxxJkTQDjh1k1DbJI1gkxMoavotfLyCOzGjltTa8IIgWFbFYiOnjCHyEkyzKFXlscbIUR70FXsKpyVaz1X85_1kCSWjioBty-OmkdSvgrCKniRJUWtmKOfAvJz5luRevHXPvXW25E2PA4ZF8qpwYmrCYaZX_qsJj9-qpOb5J7W6HcnrNp8CSLnNRwdVS0LxHbl0uXruQI6ZDmZy6vmqG3sWQlWTCWA589sF1kDGddjFf_SkbM4YYz6S-l8NW4JXuf9pBUg-SVXAM7z9p8yfdIBAitW8q2Jl9agH75ghuqy472WBMA7tZ5ajkZWWWgN0A2pVSFD090jfLQbCa4LTy5poKkpzPoDXh6T9oeKIVPZkkotuLrmJTln3wKQYWYvixXs0zPiB9ZEvUYV92RW0JhpoSie-_rUy0g0dP6WmoHVCUiPzGEztwQYFiJMQjM0T6ROuIGnY3NULb6mC" charset="UTF-8"></script><style>
        :root {
            --color-primary: #208088;
            --color-primary-hover: #1a6870;
            --color-primary-light: #e8f4f6;
            --color-accent: #d4a574;
            --color-accent-light: #f5ede3;
            --color-success: #27ae60;
            --color-error: #e74c3c;
            --color-text: #2c3e50;
            --color-text-light: #7f8c8d;
            --color-bg: #f8f9fa;
            --color-surface: #ffffff;
            --color-border: #ecf0f1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.5;
            color: var(--color-text);
            background-color: var(--color-bg);
            -webkit-font-smoothing: antialiased;
        }

        body {
            margin: 0;
            padding: 20px 0;
            background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-accent-light) 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: var(--color-surface);
            padding: 30px 0;
            margin-bottom: 40px;
            border-bottom: 3px solid var(--color-primary);
            box-shadow: 0 2px 8px rgba(32, 128, 136, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo-section h1 {
            font-size: 2rem;
            color: var(--color-primary);
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .logo-section p {
            color: var(--color-text-light);
            font-size: 0.95rem;
            margin-top: 5px;
        }

        .language-selector {
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            padding: 8px 16px;
            border: 2px solid var(--color-border);
            background: var(--color-surface);
            color: var(--color-text);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 200ms ease;
        }

        .lang-btn.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .lang-btn:hover:not(.active) {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }

        .form-container {
            background: var(--color-surface);
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            padding: 40px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .form-container {
                padding: 24px;
            }
        }

        .progress-section {
            margin-bottom: 40px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--color-border);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
            border-radius: 3px;
            transition: width 300ms ease;
        }

        .form-step {
            display: none;
            animation: fadeIn 300ms ease;
        }

        .form-step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--color-primary);
        }

        .step-description {
            color: var(--color-text-light);
            margin-bottom: 24px;
            font-size: 0.95rem;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .form-label.required::after {
            content: '*';
            color: var(--color-error);
            margin-left: 4px;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            color: var(--color-text);
            background: var(--color-surface);
            transition: all 200ms ease;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(32, 128, 136, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .checkbox-group,
        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-item input[type="checkbox"],
        .radio-item input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--color-primary);
        }

        .checkbox-item label,
        .radio-item label {
            cursor: pointer;
            flex: 1;
            font-size: 0.95rem;
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 40px;
            justify-content: space-between;
        }

        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 200ms ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--color-primary-hover);
            box-shadow: 0 4px 12px rgba(32, 128, 136, 0.3);
        }

        .btn-secondary {
            background: var(--color-border);
            color: var(--color-text);
        }

        .btn-secondary:hover:not(:disabled) {
            background: #ddd;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .summary-container {
            display: none;
        }

        .summary-container.active {
            display: block;
        }

        .summary-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 30px;
            text-align: center;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .summary-card {
            background: var(--color-bg);
            border: 2px solid var(--color-border);
            border-left: 5px solid var(--color-primary);
            border-radius: 8px;
            padding: 20px;
            transition: all 200ms ease;
        }

        .summary-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .summary-card-title {
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 12px;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-card-content {
            color: var(--color-text);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .summary-card-content ul {
            list-style: none;
            padding: 0;
        }

        .summary-card-content li {
            padding: 4px 0;
        }

        .summary-card-content li::before {
            content: '‚úì ';
            color: var(--color-success);
            font-weight: bold;
            margin-right: 8px;
        }

        .success-message {
            background: var(--color-primary-light);
            border: 2px solid var(--color-primary);
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            margin-bottom: 30px;
        }

        .success-icon {
            font-size: 3rem;
            margin-bottom: 12px;
        }

        .success-text {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--color-primary);
        }

        footer {
            text-align: center;
            color: var(--color-text-light);
            font-size: 0.85rem;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
            }

            .logo-section h1 {
                font-size: 1.5rem;
            }

            .button-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .summary-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <h1>üìã Client Profile Builder</h1>
                    <p id="header-subtitle">Profilo Cliente - Percorso Personalizzato</p>
                </div>
                <div class="language-selector">
                    <button class="lang-btn active" data-lang="it">Italiano</button>
                    <button class="lang-btn" data-lang="en">English</button>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="form-container">
            <div class="progress-section">
                <div class="progress-label">
                    <span id="progress-text">Step 1 of 9</span>
                    <span id="progress-percent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
            </div>

            <form id="clientForm">
                <!-- Step 1: Personal Info -->
                <div class="form-step active" data-step="1">
                    <div class="step-title" data-i18n="step1_title">1. Informazioni Personali</div>
                    <div class="step-description" data-i18n="step1_desc">Iniziamo con i tuoi dati di base</div>

                    <div class="form-group">
                        <label class="form-label required" for="fullName" data-i18n="fullname">Nome Completo</label>
                        <input type="text" id="fullName" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" for="email" data-i18n="email">Email</label>
                        <input type="email" id="email" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" for="phone" data-i18n="phone">Telefono</label>
                        <input type="tel" id="phone" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" for="age" data-i18n="age">Et√†</label>
                        <input type="number" id="age" class="form-input" min="16" max="120" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" for="codiceFiscale" data-i18n="codice_fiscale">Codice Fiscale</label>
                        <input type="text" id="codiceFiscale" class="form-input" placeholder="Es: RSSMRA80A01H501T" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="gender">Genere</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="male" name="gender" value="M" required>
                                <label for="male" data-i18n="male">Uomo</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="female" name="gender" value="F">
                                <label for="female" data-i18n="female">Donna</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="other" name="gender" value="O">
                                <label for="other" data-i18n="other">Altro</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Health History -->
                <div class="form-step" data-step="2">
                    <div class="step-title" data-i18n="step2_title">2. Storia Medica</div>
                    <div class="step-description" data-i18n="step2_desc">Informazioni sulla tua salute e eventuali condizioni mediche</div>

                    <div class="form-group">
                        <label class="form-label" data-i18n="medical_conditions">Hai condizioni mediche? (seleziona tutte le applicabili)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="diabetes" name="conditions" value="Diabete">
                                <label for="diabetes">Diabete</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hypertension" name="conditions" value="Ipertensione">
                                <label for="hypertension">Ipertensione</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="heart" name="conditions" value="Malattie Cardiache">
                                <label for="heart">Malattie Cardiache</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="arthritis" name="conditions" value="Artrite">
                                <label for="arthritis">Artrite</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="none" name="conditions" value="Nessuna">
                                <label for="none">Nessuna</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="medications" data-i18n="medications">Farmaci attuali (lista)</label>
                        <textarea id="medications" class="form-textarea" placeholder="Es: Aspirina, Metformina..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="allergies" data-i18n="allergies">Allergie (cibo, farmaci, altro)</label>
                        <textarea id="allergies" class="form-textarea" placeholder="Descrivi le tue allergie..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="surgeries" data-i18n="surgeries">Interventi chirurgici precedenti</label>
                        <textarea id="surgeries" class="form-textarea" placeholder="Descrivi eventuali interventi..."></textarea>
                    </div>
                </div>

                <!-- Step 3: Fitness Goals -->
                <div class="form-step" data-step="3">
                    <div class="step-title" data-i18n="step3_title">3. Obiettivi di Fitness</div>
                    <div class="step-description" data-i18n="step3_desc">Quali sono i tuoi principali obiettivi?</div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="fitness_goals">Seleziona i tuoi obiettivi (multipla scelta)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="weight_loss" name="fitness_goals" value="Perdere Peso">
                                <label for="weight_loss" data-i18n="weight_loss">Perdere Peso</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="muscle_gain" name="fitness_goals" value="Aumentare Massa Muscolare">
                                <label for="muscle_gain" data-i18n="muscle_gain">Aumentare Massa Muscolare</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="strength" name="fitness_goals" value="Aumentare Forza">
                                <label for="strength" data-i18n="strength">Aumentare Forza</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="endurance" name="fitness_goals" value="Migliorare Resistenza">
                                <label for="endurance" data-i18n="endurance">Migliorare Resistenza</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="flexibility" name="fitness_goals" value="Migliorare Flessibilit√†">
                                <label for="flexibility" data-i18n="flexibility">Migliorare Flessibilit√†</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="health" name="fitness_goals" value="Salute Generale">
                                <label for="health" data-i18n="health">Salute Generale</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" for="goalImportance" data-i18n="goal_importance">Quanto sono importanti questi obiettivi per te? (1-10)</label>
                        <input type="range" id="goalImportance" class="form-input" min="1" max="10" value="5" required>
                        <div style="text-align: center; margin-top: 10px; color: var(--color-text-light);">
                            <span id="importance-value">5</span> / 10
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="goalTimeline" data-i18n="goal_timeline">Timeline per raggiungere gli obiettivi</label>
                        <select id="goalTimeline" class="form-select">
                            <option value="">-- Seleziona --</option>
                            <option value="1-3 mesi">1-3 mesi</option>
                            <option value="3-6 mesi">3-6 mesi</option>
                            <option value="6-12 mesi">6-12 mesi</option>
                            <option value="1+ anno">1+ anno</option>
                        </select>
                    </div>
                </div>

                <!-- Step 4: Exercise Experience -->
                <div class="form-step" data-step="4">
                    <div class="step-title" data-i18n="step4_title">4. Esperienza di Esercizio</div>
                    <div class="step-description" data-i18n="step4_desc">Qual √® il tuo livello di esperienza con l'esercizio?</div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="experience_level">Livello di Esperienza</label>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="beginner" name="experience" value="Principiante" required>
                                <label for="beginner" data-i18n="beginner">Principiante (nessuna/poca esperienza)</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="intermediate" name="experience" value="Intermedio">
                                <label for="intermediate" data-i18n="intermediate">Intermedio (1-3 anni)</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="advanced" name="experience" value="Avanzato">
                                <label for="advanced" data-i18n="advanced">Avanzato (3+ anni)</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="exercise_frequency">Quanto spesso eserciti attualmente?</label>
                        <select id="exerciseFrequency" class="form-select" required>
                            <option value="">-- Seleziona --</option>
                            <option value="Mai">Mai</option>
                            <option value="1-2 volte/settimana">1-2 volte/settimana</option>
                            <option value="3-4 volte/settimana">3-4 volte/settimana</option>
                            <option value="5+ volte/settimana">5+ volte/settimana</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="favorite_activities">Quali attivit√† ti piacciono di pi√π?</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="cardio" name="activities" value="Cardio">
                                <label for="cardio">Cardio (corsa, nuoto, ciclismo)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="weights" name="activities" value="Pesi">
                                <label for="weights">Pesi/Palestra</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="yoga" name="activities" value="Yoga">
                                <label for="yoga">Yoga/Pilates</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="sports" name="activities" value="Sport">
                                <label for="sports">Sport (calcio, tennis, ecc.)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="group" name="activities" value="Classi di Gruppo">
                                <label for="group">Classi di Gruppo (CrossFit, Dance, ecc.)</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Nutrition -->
                <div class="form-step" data-step="5">
                    <div class="step-title" data-i18n="step5_title">5. Nutrizione</div>
                    <div class="step-description" data-i18n="step5_desc">Informazioni sulle tue abitudini alimentari</div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="diet_type">Qual √® il tuo tipo di dieta?</label>
                        <select id="dietType" class="form-select" required>
                            <option value="">-- Seleziona --</option>
                            <option value="Onnivora">Onnivora (mangio tutto)</option>
                            <option value="Vegetariana">Vegetariana</option>
                            <option value="Vegana">Vegana</option>
                            <option value="Senza Glutine">Senza Glutine</option>
                            <option value="Chetogenica">Chetogenica</option>
                            <option value="Altro">Altro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="water_intake">Quanta acqua bevi giornalmente?</label>
                        <select id="waterIntake" class="form-select" required>
                            <option value="">-- Seleziona --</option>
                            <option value="Meno di 1L">Meno di 1L</option>
                            <option value="1-2L">1-2L</option>
                            <option value="2-3L">2-3L</option>
                            <option value="Pi√π di 3L">Pi√π di 3L</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="foodRestrictions" data-i18n="food_restrictions">Restrizioni alimentari o preferenze</label>
                        <textarea id="foodRestrictions" class="form-textarea" placeholder="Es: Non mangio pesce, preferisco biologico..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="nutritionGoals" data-i18n="nutrition_goals">Quali sono i tuoi obiettivi nutrizionali specifici?</label>
                        <textarea id="nutritionGoals" class="form-textarea" placeholder="Es: Ridurre zuccheri, aumentare proteine..."></textarea>
                    </div>
                </div>

                <!-- Step 6: Lifestyle -->
                <div class="form-step" data-step="6">
                    <div class="step-title" data-i18n="step6_title">6. Stile di Vita</div>
                    <div class="step-description" data-i18n="step6_desc">Informazioni sul tuo stile di vita quotidiano</div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="sleep_quality">Qualit√† del sonno (1-10)</label>
                        <input type="range" id="sleepQuality" class="form-input" min="1" max="10" value="5" required>
                        <div style="text-align: center; margin-top: 10px; color: var(--color-text-light);">
                            <span id="sleep-value">5</span> / 10
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="stress_level">Livello di stress (1-10)</label>
                        <input type="range" id="stressLevel" class="form-input" min="1" max="10" value="5" required>
                        <div style="text-align: center; margin-top: 10px; color: var(--color-text-light);">
                            <span id="stress-value">5</span> / 10
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="work_type">Tipo di lavoro</label>
                        <select id="workType" class="form-select" required>
                            <option value="">-- Seleziona --</option>
                            <option value="Sedentario (ufficio)">Sedentario (ufficio)</option>
                            <option value="Moderatamente Attivo">Moderatamente Attivo</option>
                            <option value="Molto Attivo (manuale)">Molto Attivo (manuale)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="hobbies" data-i18n="hobbies">Hobby e attivit√† ricreative</label>
                        <textarea id="hobbies" class="form-textarea" placeholder="Descrivi i tuoi hobby..."></textarea>
                    </div>
                </div>

                <!-- Step 7: Body Measurements -->
                <div class="form-step" data-step="7">
                    <div class="step-title" data-i18n="step7_title">7. Misurazioni Corporee</div>
                    <div class="step-description" data-i18n="step7_desc">Informazioni sulla tua composizione corporea</div>

                    <div class="form-group">
                        <label class="form-label required" for="height" data-i18n="height">Altezza (cm)</label>
                        <input type="number" id="height" class="form-input" min="100" max="250" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" for="weight" data-i18n="weight">Peso Attuale (kg)</label>
                        <input type="number" id="weight" class="form-input" min="30" max="300" step="0.1" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="waist" data-i18n="waist">Circonferenza Vita (cm)</label>
                        <input type="number" id="waist" class="form-input" min="40" max="200" step="0.1">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="hips" data-i18n="hips">Circonferenza Fianchi (cm)</label>
                        <input type="number" id="hips" class="form-input" min="40" max="200" step="0.1">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="chest" data-i18n="chest">Circonferenza Petto (cm)</label>
                        <input type="number" id="chest" class="form-input" min="60" max="200" step="0.1">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="bodyFat" data-i18n="body_fat">Percentuale Grasso Corporeo (se nota) %</label>
                        <input type="number" id="bodyFat" class="form-input" min="5" max="50" step="0.1">
                    </div>
                </div>

                <!-- Step 8: Motivation & Availability -->
                <div class="form-step" data-step="8">
                    <div class="step-title" data-i18n="step8_title">8. Motivazione e Disponibilit√†</div>
                    <div class="step-description" data-i18n="step8_desc">Quando e come vuoi lavorare con noi?</div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="session_preference">Preferenza per le sessioni</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="morning" name="session_pref" value="Mattina">
                                <label for="morning" data-i18n="morning">Mattina</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="afternoon" name="session_pref" value="Pomeriggio">
                                <label for="afternoon" data-i18n="afternoon">Pomeriggio</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="evening" name="session_pref" value="Sera">
                                <label for="evening" data-i18n="evening">Sera</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="flexible" name="session_pref" value="Flessibile">
                                <label for="flexible" data-i18n="flexible">Flessibile</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="sessions_per_week">Quante sessioni a settimana?</label>
                        <select id="sessionsPerWeek" class="form-select" required>
                            <option value="">-- Seleziona --</option>
                            <option value="1">1 sessione</option>
                            <option value="2">2 sessioni</option>
                            <option value="3">3 sessioni</option>
                            <option value="4">4 sessioni</option>
                            <option value="5+">5+ sessioni</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" data-i18n="session_duration">Durata preferita sessione</label>
                        <select id="sessionDuration" class="form-select" required>
                            <option value="">-- Seleziona --</option>
                            <option value="30 min">30 minuti</option>
                            <option value="45 min">45 minuti</option>
                            <option value="60 min">60 minuti</option>
                            <option value="90 min">90 minuti</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="constraints" data-i18n="constraints">Eventuali vincoli o limitazioni?</label>
                        <textarea id="constraints" class="form-textarea" placeholder="Es: Infortunio alla schiena, orari limitati..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="motivation" data-i18n="motivation">Cosa ti motiva di pi√π?</label>
                        <textarea id="motivation" class="form-textarea" placeholder="Descrivi quello che ti motiva..."></textarea>
                    </div>
                </div>

                <!-- Step 9: Summary & Consent -->
                <div class="form-step" data-step="9">
                    <div class="step-title" data-i18n="step9_title">9. Riepilogo e Consenso</div>
                    <div class="step-description" data-i18n="step9_desc">Controlla le tue informazioni e dai il consenso</div>

                    <div id="finalSummary" style="background: var(--color-primary-light); padding: 20px; border-radius: 8px; margin-bottom: 24px;">
                        <p style="color: var(--color-primary); font-weight: 600; margin-bottom: 12px;">Profilo Riassunto</p>
                        <div style="color: var(--color-text); line-height: 1.8;" id="summaryPreview">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="consent" required>
                            <label for="consent" data-i18n="consent">Confermo che le informazioni fornite sono accurate e autorizzo il uso di questi dati per il mio percorso personalizzato</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="privacy">
                            <label for="privacy" data-i18n="privacy">Ho letto e accetto la politica sulla privacy</label>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button type="button" class="btn btn-secondary" id="prevBtn" style="display: none;" data-i18n="previous">‚Üê Precedente</button>
                    <button type="button" class="btn btn-primary" id="nextBtn" data-i18n="next">Successivo ‚Üí</button>
                </div>
            </form>

            <!-- Success Summary -->
            <div class="summary-container" id="successSummary">
                <div class="success-message">
                    <div class="success-icon">‚úÖ</div>
                    <div class="success-text" data-i18n="success_title">Profilo Creato con Successo!</div>
                </div>

                <div class="summary-grid" id="summaryDetails">
                    <!-- Populated by JS -->
                </div>

                <div style="display: flex; gap: 12px; margin-top: 40px; flex-wrap: wrap;">
                    <button type="button" class="btn btn-primary" onclick="downloadProfilePDF()" data-i18n="download_pdf">üì• Scarica PDF</button>
                    <button type="button" class="btn btn-primary" onclick="sendProfileEmail()" data-i18n="save_profile">üíæ Salva su JSONBin</button>
                    <button type="button" class="btn btn-secondary" onclick="resetForm()" data-i18n="start_over">Ricomincia da Capo</button>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Client Profile Builder. Creato per Nutrizionisti e Personal Trainer. | <span data-i18n="footer">Tutti i diritti riservati</span></p>
    </footer>

    <script>
        // ============= JSONBin Configuration =============
        // SOSTITUISCI CON I TUOI DATI
        const JSONBIN_BIN_ID = '692abda043b1c97be9cc7ffb';
        const JSONBIN_API_KEY = '$2a$10$aMh1mO8btCVSqfcvlxvUJeJ6p.7kHJlSyKz7UjvTu2wqRAQlAcAXe';

        // ============= Translations =============
        const translations = {
            it: {
                'step1_title': '1. Informazioni Personali',
                'step1_desc': 'Iniziamo con i tuoi dati di base',
                'fullname': 'Nome Completo',
                'email': 'Email',
                'phone': 'Telefono',
                'age': 'Et√†',
                'gender': 'Genere',
                'male': 'Uomo',
                'female': 'Donna',
                'other': 'Altro',
                'codice_fiscale': 'Codice Fiscale',
                'step2_title': '2. Storia Medica',
                'step2_desc': 'Informazioni sulla tua salute e eventuali condizioni mediche',
                'medical_conditions': 'Hai condizioni mediche? (seleziona tutte le applicabili)',
                'medications': 'Farmaci attuali (lista)',
                'allergies': 'Allergie (cibo, farmaci, altro)',
                'surgeries': 'Interventi chirurgici precedenti',
                'step3_title': '3. Obiettivi di Fitness',
                'step3_desc': 'Quali sono i tuoi principali obiettivi?',
                'fitness_goals': 'Seleziona i tuoi obiettivi (multipla scelta)',
                'weight_loss': 'Perdere Peso',
                'muscle_gain': 'Aumentare Massa Muscolare',
                'strength': 'Aumentare Forza',
                'endurance': 'Migliorare Resistenza',
                'flexibility': 'Migliorare Flessibilit√†',
                'health': 'Salute Generale',
                'goal_importance': 'Quanto sono importanti questi obiettivi per te? (1-10)',
                'goal_timeline': 'Timeline per raggiungere gli obiettivi',
                'step4_title': '4. Esperienza di Esercizio',
                'step4_desc': 'Qual √® il tuo livello di esperienza con l\'esercizio?',
                'experience_level': 'Livello di Esperienza',
                'beginner': 'Principiante (nessuna/poca esperienza)',
                'intermediate': 'Intermedio (1-3 anni)',
                'advanced': 'Avanzato (3+ anni)',
                'exercise_frequency': 'Quanto spesso eserciti attualmente?',
                'favorite_activities': 'Quali attivit√† ti piacciono di pi√π?',
                'step5_title': '5. Nutrizione',
                'step5_desc': 'Informazioni sulle tue abitudini alimentari',
                'diet_type': 'Qual √® il tuo tipo di dieta?',
                'water_intake': 'Quanta acqua bevi giornalmente?',
                'food_restrictions': 'Restrizioni alimentari o preferenze',
                'nutrition_goals': 'Quali sono i tuoi obiettivi nutrizionali specifici?',
                'step6_title': '6. Stile di Vita',
                'step6_desc': 'Informazioni sul tuo stile di vita quotidiano',
                'sleep_quality': 'Qualit√† del sonno (1-10)',
                'stress_level': 'Livello di stress (1-10)',
                'work_type': 'Tipo di lavoro',
                'hobbies': 'Hobby e attivit√† ricreative',
                'step7_title': '7. Misurazioni Corporee',
                'step7_desc': 'Informazioni sulla tua composizione corporea',
                'height': 'Altezza (cm)',
                'weight': 'Peso Attuale (kg)',
                'waist': 'Circonferenza Vita (cm)',
                'hips': 'Circonferenza Fianchi (cm)',
                'chest': 'Circonferenza Petto (cm)',
                'body_fat': 'Percentuale Grasso Corporeo (se nota) %',
                'step8_title': '8. Motivazione e Disponibilit√†',
                'step8_desc': 'Quando e come vuoi lavorare con noi?',
                'session_preference': 'Preferenza per le sessioni',
                'morning': 'Mattina',
                'afternoon': 'Pomeriggio',
                'evening': 'Sera',
                'flexible': 'Flessibile',
                'sessions_per_week': 'Quante sessioni a settimana?',
                'session_duration': 'Durata preferita sessione',
                'constraints': 'Eventuali vincoli o limitazioni?',
                'motivation': 'Cosa ti motiva di pi√π?',
                'step9_title': '9. Riepilogo e Consenso',
                'step9_desc': 'Controlla le tue informazioni e dai il consenso',
                'consent': 'Confermo che le informazioni fornite sono accurate e autorizzo il uso di questi dati per il mio percorso personalizzato',
                'privacy': 'Ho letto e accetto la politica sulla privacy',
                'previous': '‚Üê Precedente',
                'next': 'Successivo ‚Üí',
                'success_title': 'Profilo Creato con Successo!',
                'download_pdf': 'üì• Scarica PDF',
                'save_profile': 'üíæ Salva su JSONBin',
                'start_over': 'Ricomincia da Capo',
                'footer': 'Tutti i diritti riservati',
                'header-subtitle': 'Profilo Cliente - Percorso Personalizzato'
            },
            en: {
                'step1_title': '1. Personal Information',
                'step1_desc': 'Let\'s start with your basic information',
                'fullname': 'Full Name',
                'email': 'Email',
                'phone': 'Phone',
                'age': 'Age',
                'gender': 'Gender',
                'male': 'Male',
                'female': 'Female',
                'other': 'Other',
                'codice_fiscale': 'Tax Code',
                'step2_title': '2. Medical History',
                'step2_desc': 'Information about your health and any medical conditions',
                'medical_conditions': 'Do you have any medical conditions? (select all that apply)',
                'medications': 'Current medications (list)',
                'allergies': 'Allergies (food, medications, other)',
                'surgeries': 'Previous surgeries',
                'step3_title': '3. Fitness Goals',
                'step3_desc': 'What are your main goals?',
                'fitness_goals': 'Select your goals (multiple choice)',
                'weight_loss': 'Lose Weight',
                'muscle_gain': 'Gain Muscle',
                'strength': 'Increase Strength',
                'endurance': 'Improve Endurance',
                'flexibility': 'Improve Flexibility',
                'health': 'General Health',
                'goal_importance': 'How important are these goals to you? (1-10)',
                'goal_timeline': 'Timeline to achieve goals',
                'step4_title': '4. Exercise Experience',
                'step4_desc': 'What is your level of exercise experience?',
                'experience_level': 'Experience Level',
                'beginner': 'Beginner (no/little experience)',
                'intermediate': 'Intermediate (1-3 years)',
                'advanced': 'Advanced (3+ years)',
                'exercise_frequency': 'How often do you exercise currently?',
                'favorite_activities': 'What activities do you enjoy most?',
                'step5_title': '5. Nutrition',
                'step5_desc': 'Information about your eating habits',
                'diet_type': 'What is your diet type?',
                'water_intake': 'How much water do you drink daily?',
                'food_restrictions': 'Food restrictions or preferences',
                'nutrition_goals': 'What are your specific nutrition goals?',
                'step6_title': '6. Lifestyle',
                'step6_desc': 'Information about your daily lifestyle',
                'sleep_quality': 'Sleep quality (1-10)',
                'stress_level': 'Stress level (1-10)',
                'work_type': 'Type of work',
                'hobbies': 'Hobbies and recreational activities',
                'step7_title': '7. Body Measurements',
                'step7_desc': 'Information about your body composition',
                'height': 'Height (cm)',
                'weight': 'Current Weight (kg)',
                'waist': 'Waist Circumference (cm)',
                'hips': 'Hip Circumference (cm)',
                'chest': 'Chest Circumference (cm)',
                'body_fat': 'Body Fat Percentage (if known) %',
                'step8_title': '8. Motivation & Availability',
                'step8_desc': 'When and how would you like to work with us?',
                'session_preference': 'Session preference',
                'morning': 'Morning',
                'afternoon': 'Afternoon',
                'evening': 'Evening',
                'flexible': 'Flexible',
                'sessions_per_week': 'How many sessions per week?',
                'session_duration': 'Preferred session duration',
                'constraints': 'Any constraints or limitations?',
                'motivation': 'What motivates you most?',
                'step9_title': '9. Summary & Consent',
                'step9_desc': 'Review your information and give consent',
                'consent': 'I confirm that the provided information is accurate and authorize the use of this data for my personalized journey',
                'privacy': 'I have read and accept the privacy policy',
                'previous': '‚Üê Previous',
                'next': 'Next ‚Üí',
                'success_title': 'Profile Created Successfully!',
                'download_pdf': 'üì• Download PDF',
                'save_profile': 'üíæ Save to JSONBin',
                'start_over': 'Start Over',
                'footer': 'All rights reserved',
                'header-subtitle': 'Client Profile - Personalized Journey'
            }
        };

        let currentLang = 'it';
        let currentStep = 1;
        const totalSteps = 9;

        document.addEventListener('DOMContentLoaded', function() {
            setupLanguage();
            setupEventListeners();
            updateProgressBar();
        });

        function setupLanguage() {
            document.querySelectorAll('[data-lang]').forEach(btn => {
                btn.addEventListener('click', function() {
                    currentLang = this.dataset.lang;
                    document.querySelectorAll('[data-lang]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    updateTranslations();
                });
            });
        }

        function updateTranslations() {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.dataset.i18n;
                if (translations[currentLang][key]) {
                    el.textContent = translations[currentLang][key];
                }
            });
        }

        function setupEventListeners() {
            document.getElementById('nextBtn').addEventListener('click', nextStep);
            document.getElementById('prevBtn').addEventListener('click', prevStep);

            document.getElementById('goalImportance').addEventListener('change', function() {
                document.getElementById('importance-value').textContent = this.value;
            });
            document.getElementById('sleepQuality').addEventListener('change', function() {
                document.getElementById('sleep-value').textContent = this.value;
            });
            document.getElementById('stressLevel').addEventListener('change', function() {
                document.getElementById('stress-value').textContent = this.value;
            });

            document.getElementById('clientForm').addEventListener('submit', function(e) {
                e.preventDefault();
            });
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                if (validateStep(currentStep)) {
                    currentStep++;
                    showStep(currentStep);
                    updateProgressBar();
                    window.scrollTo(0, 0);
                }
            } else if (currentStep === totalSteps) {
                if (validateStep(currentStep)) {
                    showSummary();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
                updateProgressBar();
                window.scrollTo(0, 0);
            }
        }

        function showStep(step) {
            document.querySelectorAll('.form-step').forEach(el => el.classList.remove('active'));
            document.querySelector(`[data-step="${step}"]`).classList.add('active');

            document.getElementById('prevBtn').style.display = step === 1 ? 'none' : 'inline-flex';

            let nextBtn = document.getElementById('nextBtn');
            if (step === totalSteps) {
                nextBtn.textContent = currentLang === 'it' ? '‚úì Completa Profilo' : '‚úì Complete Profile';
            } else {
                nextBtn.textContent = currentLang === 'it' ? 'Successivo ‚Üí' : 'Next ‚Üí';
            }
        }

        function updateProgressBar() {
            const percent = (currentStep / totalSteps) * 100;
            document.querySelector('.progress-fill').style.width = percent + '%';
            document.getElementById('progress-text').textContent = `Step ${currentStep} of ${totalSteps}`;
            document.getElementById('progress-percent').textContent = Math.round(percent) + '%';
        }

        function validateStep(step) {
            const form = document.getElementById('clientForm');
            const inputs = form.querySelectorAll(`[data-step="${step}"] input[required], [data-step="${step}"] select[required], [data-step="${step}"] textarea[required]`);

            for (let input of inputs) {
                if (input.type === 'radio' || input.type === 'checkbox') continue;
                if (!input.value.trim()) {
                    alert(currentLang === 'it' ? 'Per favore compila tutti i campi obbligatori' : 'Please fill all required fields');
                    return false;
                }
            }
            return true;
        }

        function showSummary() {
            const formData = getFormData();

            const bmi = formData.height && formData.weight
                ? (formData.weight / ((formData.height/100) ** 2)).toFixed(1)
                : '-';

            const summaryPreview = document.getElementById('summaryPreview');
            summaryPreview.innerHTML = `
                <p><strong>Nome:</strong> ${formData.fullName}</p>
                <p><strong>Codice Fiscale:</strong> ${formData.codiceFiscale}</p>
                <p><strong>Et√†:</strong> ${formData.age} anni</p>
                <p><strong>Email:</strong> ${formData.email}</p>
                <p><strong>Obiettivi:</strong> ${formData.fitnessGoals.join(', ')}</p>
                <p><strong>Livello:</strong> ${formData.experience}</p>
                <p><strong>BMI:</strong> ${bmi}</p>
            `;

            const summaryDetails = document.getElementById('summaryDetails');
            summaryDetails.innerHTML = `
                <div class="summary-card">
                    <div class="summary-card-title">üë§ Profilo Personale</div>
                    <div class="summary-card-content">
                        <p><strong>${formData.fullName}</strong></p>
                        <p>Codice Fiscale: ${formData.codiceFiscale}</p>
                        <p>Et√†: ${formData.age} anni</p>
                        <p>Email: ${formData.email}</p>
                        <p>Telefono: ${formData.phone}</p>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-title">üéØ Obiettivi</div>
                    <div class="summary-card-content">
                        <ul>
                            ${formData.fitnessGoals.map(g => `<li>${g}</li>`).join('')}
                        </ul>
                        <p style="margin-top: 12px;"><strong>Importanza: ${formData.goalImportance}/10</strong></p>
                        <p>Timeline: ${formData.goalTimeline}</p>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-title">üí™ Esperienza</div>
                    <div class="summary-card-content">
                        <p><strong>Livello:</strong> ${formData.experience}</p>
                        <p><strong>Frequenza:</strong> ${formData.exerciseFrequency}</p>
                        <p><strong>Attivit√† Preferite:</strong></p>
                        <ul>
                            ${formData.activities.map(a => `<li>${a}</li>`).join('')}
                        </ul>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-title">ü•ó Nutrizione</div>
                    <div class="summary-card-content">
                        <p><strong>Tipo Dieta:</strong> ${formData.dietType}</p>
                        <p><strong>Acqua Giornaliera:</strong> ${formData.waterIntake}</p>
                        <p><strong>Restrizioni:</strong> ${formData.foodRestrictions || 'Nessuna'}</p>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-title">üìä Misure Corporee</div>
                    <div class="summary-card-content">
                        <p><strong>Altezza:</strong> ${formData.height} cm</p>
                        <p><strong>Peso:</strong> ${formData.weight} kg</p>
                        <p><strong>BMI:</strong> ${bmi}</p>
                        ${formData.waist ? `<p><strong>Vita:</strong> ${formData.waist} cm</p>` : ''}
                        ${formData.hips ? `<p><strong>Fianchi:</strong> ${formData.hips} cm</p>` : ''}
                    </div>
                </div>

                <div class="summary-card">
                    <div class="summary-card-title">‚è∞ Disponibilit√†</div>
                    <div class="summary-card-content">
                        <p><strong>Sessioni/Settimana:</strong> ${formData.sessionsPerWeek}</p>
                        <p><strong>Durata Sessione:</strong> ${formData.sessionDuration}</p>
                        <p><strong>Preferenza Orario:</strong></p>
                        <ul>
                            ${formData.sessionPref.map(p => `<li>${p}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;

            document.getElementById('clientForm').style.display = 'none';
            document.getElementById('successSummary').classList.add('active');
        }

        function getFormData() {
            return {
                fullName: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                age: document.getElementById('age').value,
                codiceFiscale: document.getElementById('codiceFiscale').value,
                gender: document.querySelector('input[name="gender"]:checked')?.value || '-',
                conditions: Array.from(document.querySelectorAll('input[name="conditions"]:checked')).map(el => el.value),
                medications: document.getElementById('medications').value,
                allergies: document.getElementById('allergies').value,
                surgeries: document.getElementById('surgeries').value,
                fitnessGoals: Array.from(document.querySelectorAll('input[name="fitness_goals"]:checked')).map(el => el.value),
                goalImportance: document.getElementById('goalImportance').value,
                goalTimeline: document.getElementById('goalTimeline').value,
                experience: document.querySelector('input[name="experience"]:checked')?.value || '-',
                exerciseFrequency: document.getElementById('exerciseFrequency').value,
                activities: Array.from(document.querySelectorAll('input[name="activities"]:checked')).map(el => el.value),
                dietType: document.getElementById('dietType').value,
                waterIntake: document.getElementById('waterIntake').value,
                foodRestrictions: document.getElementById('foodRestrictions').value,
                nutritionGoals: document.getElementById('nutritionGoals').value,
                sleepQuality: document.getElementById('sleepQuality').value,
                stressLevel: document.getElementById('stressLevel').value,
                workType: document.getElementById('workType').value,
                hobbies: document.getElementById('hobbies').value,
                height: parseInt(document.getElementById('height').value),
                weight: parseFloat(document.getElementById('weight').value),
                waist: document.getElementById('waist').value,
                hips: document.getElementById('hips').value,
                chest: document.getElementById('chest').value,
                bodyFat: document.getElementById('bodyFat').value,
                sessionPref: Array.from(document.querySelectorAll('input[name="session_pref"]:checked')).map(el => el.value),
                sessionsPerWeek: document.getElementById('sessionsPerWeek').value,
                sessionDuration: document.getElementById('sessionDuration').value,
                constraints: document.getElementById('constraints').value,
                motivation: document.getElementById('motivation').value
            };
        }

        function downloadProfilePDF() {
            const formData = getFormData();
            const bmi = formData.height && formData.weight
                ? (formData.weight / ((formData.height/100) ** 2)).toFixed(1)
                : '-';

            const pdfContent = `
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>Profilo - ${formData.fullName}</title>
                    <style>
                        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 20px; }
                        h1 { color: #208088; border-bottom: 3px solid #208088; padding-bottom: 10px; }
                        h2 { color: #208088; margin-top: 30px; font-size: 18px; }
                        .section { margin-bottom: 20px; background: #f8f9fa; padding: 15px; border-left: 5px solid #208088; }
                        p { margin: 8px 0; }
                        strong { color: #1a6870; }
                        .footer { margin-top: 40px; border-top: 1px solid #ddd; padding-top: 20px; font-size: 12px; color: #999; }
                    </style>
                </head>
                <body>
                    <h1>üìã Profilo Cliente - ${formData.fullName}</h1>

                    <div class="section">
                        <h2>üë§ Informazioni Personali</h2>
                        <p><strong>Nome:</strong> ${formData.fullName}</p>
                        <p><strong>Codice Fiscale:</strong> ${formData.codiceFiscale}</p>
                        <p><strong>Et√†:</strong> ${formData.age} anni</p>
                        <p><strong>Email:</strong> ${formData.email}</p>
                        <p><strong>Telefono:</strong> ${formData.phone}</p>
                    </div>

                    <div class="section">
                        <h2>üéØ Obiettivi di Fitness</h2>
                        <p><strong>Obiettivi:</strong> ${formData.fitnessGoals.join(', ')}</p>
                        <p><strong>Importanza (1-10):</strong> ${formData.goalImportance}</p>
                        <p><strong>Timeline:</strong> ${formData.goalTimeline}</p>
                    </div>

                    <div class="section">
                        <h2>üí™ Esperienza di Esercizio</h2>
                        <p><strong>Livello:</strong> ${formData.experience}</p>
                        <p><strong>Frequenza Attuale:</strong> ${formData.exerciseFrequency}</p>
                        <p><strong>Attivit√† Preferite:</strong> ${formData.activities.join(', ')}</p>
                    </div>

                    <div class="section">
                        <h2>ü•ó Nutrizione</h2>
                        <p><strong>Tipo Dieta:</strong> ${formData.dietType}</p>
                        <p><strong>Assunzione Acqua:</strong> ${formData.waterIntake}</p>
                        <p><strong>Restrizioni:</strong> ${formData.foodRestrictions || 'Nessuna'}</p>
                    </div>

                    <div class="section">
                        <h2>üìä Misurazioni Corporee</h2>
                        <p><strong>Altezza:</strong> ${formData.height} cm</p>
                        <p><strong>Peso:</strong> ${formData.weight} kg</p>
                        <p><strong>BMI:</strong> ${bmi}</p>
                        ${formData.waist ? `<p><strong>Circonferenza Vita:</strong> ${formData.waist} cm</p>` : ''}
                        ${formData.hips ? `<p><strong>Circonferenza Fianchi:</strong> ${formData.hips} cm</p>` : ''}
                    </div>

                    <div class="section">
                        <h2>‚è∞ Disponibilit√†</h2>
                        <p><strong>Sessioni/Settimana:</strong> ${formData.sessionsPerWeek}</p>
                        <p><strong>Durata Sessione:</strong> ${formData.sessionDuration}</p>
                        <p><strong>Preferenza Orario:</strong> ${formData.sessionPref.join(', ')}</p>
                    </div>

                    <div class="footer">
                        <p>Profilo generato il ${new Date().toLocaleDateString('it-IT')} alle ${new Date().toLocaleTimeString('it-IT')}</p>
                        <p>¬© 2025 Client Profile Builder</p>
                    </div>
                </body>
                </html>
            `;

            const win = window.open('', '', 'height=900,width=900');
            win.document.write(pdfContent);
            win.document.close();
            setTimeout(() => {
                win.print();
            }, 250);
        }

        function sendProfileEmail() {
            const formData = getFormData();
            const btn = document.querySelector('[data-i18n="save_profile"]');
            const originalText = btn.textContent;

            btn.textContent = currentLang === 'it' ? '‚è≥ Salvataggio...' : '‚è≥ Saving...';
            btn.disabled = true;

            const profile = {
                profile_id: `${formData.codiceFiscale}_${Date.now()}`,
                codice_fiscale: formData.codiceFiscale,
                fullName: formData.fullName,
                email: formData.email,
                phone: formData.phone,
                age: formData.age,
                gender: formData.gender,
                submission_date: new Date().toISOString(),

                step1_personal: {
                    fullName: formData.fullName,
                    email: formData.email,
                    phone: formData.phone,
                    age: formData.age,
                    codiceFiscale: formData.codiceFiscale,
                    gender: formData.gender
                },
                step2_health: {
                    conditions: formData.conditions,
                    medications: formData.medications,
                    allergies: formData.allergies,
                    surgeries: formData.surgeries
                },
                step3_fitness_goals: {
                    goals: formData.fitnessGoals,
                    importance: formData.goalImportance,
                    timeline: formData.goalTimeline
                },
                step4_exercise: {
                    experience: formData.experience,
                    frequency: formData.exerciseFrequency,
                    activities: formData.activities
                },
                step5_nutrition: {
                    dietType: formData.dietType,
                    waterIntake: formData.waterIntake,
                    foodRestrictions: formData.foodRestrictions,
                    nutritionGoals: formData.nutritionGoals
                },
                step6_lifestyle: {
                    sleepQuality: formData.sleepQuality,
                    stressLevel: formData.stressLevel,
                    workType: formData.workType,
                    hobbies: formData.hobbies
                },
                step7_measurements: {
                    height: formData.height,
                    weight: formData.weight,
                    waist: formData.waist,
                    hips: formData.hips,
                    chest: formData.chest,
                    bodyFat: formData.bodyFat,
                    bmi: (formData.weight / ((formData.height/100) ** 2)).toFixed(1)
                },
                step8_availability: {
                    sessionPref: formData.sessionPref,
                    sessionsPerWeek: formData.sessionsPerWeek,
                    sessionDuration: formData.sessionDuration,
                    constraints: formData.constraints,
                    motivation: formData.motivation
                }
            };

            fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`, {
                headers: { 'X-Master-Key': JSONBIN_API_KEY }
            })
            .then(res => res.json())
            .then(data => {
                let profiles = data.record.profiles || [];
                profiles.push(profile);

                return fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': JSONBIN_API_KEY
                    },
                    body: JSON.stringify({ profiles: profiles })
                });
            })
            .then(res => res.json())
            .then(result => {
                alert(currentLang === 'it'
                    ? '‚úÖ Profilo salvato con successo su JSONBin!\n\nAccedi a https://jsonbin.io per visualizzare i dati'
                    : '‚úÖ Profile saved successfully to JSONBin!\n\nGo to https://jsonbin.io to view data');
                resetForm();
            })
            .catch(error => {
                console.error('Error:', error);
                alert(currentLang === 'it'
                    ? '‚ùå Errore nel salvataggio. Verifica BIN ID e Master Key nel codice.'
                    : '‚ùå Save error. Check BIN ID and Master Key in the code.');
            })
            .finally(() => {
                btn.textContent = originalText;
                btn.disabled = false;
            });
        }

        function resetForm() {
            document.getElementById('clientForm').reset();
            document.getElementById('clientForm').style.display = 'block';
            document.getElementById('successSummary').classList.remove('active');
            currentStep = 1;
            showStep(currentStep);
            updateProgressBar();
            window.scrollTo(0, 0);
        }
    </script>
</body>
</html>
